<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CNRD - Login & Register</title>
  <script src="https://kit.fontawesome.com/606efd94ce.js" crossorigin="anonymous"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Poppins', sans-serif;
    }
    
    :root {
      --mainColor: #961973;
      --whiteColor: #ffffff;
      --titleColor: #555555;
      --labelColor: #333333;
    }
    
    html {
      font-size: 62.5%;
      scroll-behavior: smooth;
    }
    
    body {
      background: linear-gradient(to right, #da4453, var(--mainColor));
      font-weight: 400;
      min-height: 100vh;
      display: grid;
      place-content: center;
      overflow: hidden;
    }
    
    .wrapper {
      position: relative;
      width: 35rem;
      height: 55rem;
    }
    
    @media(min-width: 540px) {
      .wrapper { width: 40rem; }
    }
    
    .wrapper .form-container {
      position: absolute;
      top: 0;
      left: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      background-color: var(--whiteColor);
      border-radius: 1rem;
      box-shadow: 0 0 2rem 0 rgba(0 0 0 / .3);
    }
    
    .wrapper .form-container form {
      width: 90%;
      max-width: 32rem;
    }
    
    .wrapper .form-container form h2 {
      font-size: 3rem;
      text-align: center;
      text-transform: capitalize;
      color: var(--titleColor);
      margin-bottom: 2rem;
    }
    
    .error-message {
      background: #f8d7da;
      color: #721c24;
      padding: 1rem;
      border-radius: 0.5rem;
      margin-bottom: 1.5rem;
      font-size: 1.4rem;
      text-align: center;
    }
    
    .wrapper .form-container form .form-group {
      position: relative;
      width: 100%;
      margin: 2.5rem 0;
    }
    
    .wrapper .form-container form .form-group i,
    .wrapper .form-container form .form-group label {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.6rem;
      text-transform: capitalize;
      color: var(--labelColor);
      padding: 0 .5rem;
      pointer-events: none;
      transition: all .5s ease;
    }
    
    .wrapper .form-container form .form-group i { 
      left: .5rem; 
    }
    
    .wrapper .form-container form .form-group label { 
      left: 2.5rem; 
    }
    
    .wrapper .form-container form .form-group input {
      width: 100%;
      height: 4.5rem;
      padding: 0 1rem 0 3.5rem;
      border-radius: .5rem;
      border: none;
      outline: none;
      border: .1rem solid var(--labelColor);
      font-size: 1.6rem;
      color: var(--labelColor);
      background: transparent;
    }
    
    form .form-group input:focus~label,
    form .form-group input:valid~label,
    form .form-group input:focus~i,
    form .form-group input:valid~i {
      top: 0 !important;
      font-size: 1.2rem !important;
      background-color: var(--whiteColor);
    }
    
    .wrapper .form-container form .forgot-pass {
      margin: -1rem 0 1.5rem;
    }
    
    .wrapper .form-container form .forgot-pass a {
      color: var(--labelColor);
      text-decoration: none;
      font-size: 1.4rem;
      text-transform: capitalize;
      transition: all .5s ease;
    }
    
    .wrapper .form-container form .forgot-pass a:hover {
      color: var(--mainColor);
    }
    
    .wrapper .form-container form .btn {
      background: linear-gradient(to right, #da4453, var(--mainColor));
      color: var(--whiteColor);
      text-transform: capitalize;
      width: 100%;
      height: 4.5rem;
      font-size: 1.6rem;
      font-weight: 500;
      outline: none;
      border: none;
      border-radius: .5rem;
      cursor: pointer;
      box-shadow: 0 .2rem 1rem rgba(0 0 0 / .4);
      transition: all .3s ease;
    }
    
    .wrapper .form-container form .btn:hover {
      opacity: 0.9;
    }
    
    .wrapper .form-container form .link {
      text-align: center;
      font-size: 1.4rem;
      color: var(--labelColor);
      margin: 2rem 0;
    }
    
    .wrapper .form-container form .link a {
      text-transform: capitalize;
      color: var(--mainColor);
      text-decoration: none;
      font-weight: 600;
      transition: all .5s ease;
    }
    
    .wrapper .form-container form .link a:hover { 
      color: #da4453; 
    }
    
    .wrapper .sign-up { 
      transform: rotate(7deg); 
      z-index: 1;
    }
    
    /* Animations */
    .wrapper.animated-signin .form-container.sign-in {
      animation: signin-flip 1s ease-in-out forwards;
    }
    
    @keyframes signin-flip {
      0% { transform: translateX(0); }
      50% { transform: translateX(-50rem) scale(1.1); }
      100% { transform: translateX(0) rotate(7deg) scale(1); z-index: 2; }
    }
    
    .wrapper.animated-signin .form-container.sign-up {
      animation: rotatecard .7s ease-in-out forwards;
    }
    
    .wrapper.animated-signup .form-container.sign-up {
      animation: signup-flip 1s ease-in-out forwards;
    }
    
    .wrapper.animated-signup .form-container.sign-in {
      transform: rotate(7deg);
      animation: rotatecard .7s ease-in-out forwards;
      animation-delay: .3s;
    }
    
    @keyframes rotatecard {
      0% { transform: rotate(7deg); }
      100% { transform: rotate(0); z-index: 1; }
    }
    
    @keyframes signup-flip {
      0% { transform: translateX(0); z-index: 1; }
      50% { transform: translateX(50rem) scale(1.1); }
      100% { transform: translateX(0) rotate(7deg) scale(1); z-index: 2; }
    }

    .system-title {
      text-align: center;
      color: white;
      margin-bottom: 3rem;
    }

    .system-title h1 {
      font-size: 3rem;
      margin-bottom: 0.5rem;
    }

    .system-title p {
      font-size: 1.4rem;
      opacity: 0.9;
    }
  </style>
</head>
<body>
  <div>
    <div class="system-title">
      <h1>üè• Child Nutrition Risk Detector</h1>
      <p>AI-Powered Malnutrition Assessment System</p>
    </div>

    <div class="wrapper">
      <!-- Sign Up Form -->
      <div class="form-container sign-up">
        <form method="POST" action="{{ url_for('register') }}">
          <h2>sign up</h2>
          
          {% if error and 'match' in error.lower() %}
            <div class="error-message">{{ error }}</div>
          {% endif %}

          <div class="form-group">
            <input type="text" name="new_username" required>
            <i class="fas fa-user"></i>
            <label>username</label>
          </div>
          <div class="form-group">
            <input type="email" name="new_email">
            <i class="fas fa-at"></i>
            <label>email (optional)</label>
          </div>
          <div class="form-group">
            <input type="password" name="new_password" required>
            <i class="fas fa-lock"></i>
            <label>password</label>
          </div>
          <div class="form-group">
            <input type="password" name="confirm_password" required>
            <i class="fas fa-lock"></i>
            <label>confirm password</label>
          </div>
          <button type="submit" class="btn">sign up</button>
          <div class="link">
            <p>Already have an account? <a href="#" class="signin-link">sign in</a></p>
          </div>
        </form>
      </div>

      <!-- Sign In Form -->
      <div class="form-container sign-in">
        <form method="POST" action="{{ url_for('login') }}">
          <h2>login</h2>
          
          {% if error and 'Invalid' in error %}
            <div class="error-message">{{ error }}</div>
          {% endif %}

          <div class="form-group">
            <input type="text" name="username" required>
            <i class="fas fa-user"></i>
            <label>username</label>
          </div>
          <div class="form-group">
            <input type="password" name="password" required>
            <i class="fas fa-lock"></i>
            <label>password</label>
          </div>
          <div class="forgot-pass">
            <a href="#">forgot password?</a>
          </div>
          <button type="submit" class="btn">login</button>
          <div class="link">
            <p>Don't have an account? <a href="#" class="signup-link">sign up</a></p>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    let wrapper = document.querySelector('.wrapper'),
        signUpLink = document.querySelector('.signup-link'),
        signInLink = document.querySelector('.signin-link');

    signUpLink.addEventListener('click', (e) => {
      e.preventDefault();
      wrapper.classList.add('animated-signin');
      wrapper.classList.remove('animated-signup');
    });

    signInLink.addEventListener('click', (e) => {
      e.preventDefault();
      wrapper.classList.add('animated-signup');
      wrapper.classList.remove('animated-signin');
    });
  </script>
</body>
</html>